import"./main2.js";import"./authorization2.js";/* empty css            */import{a as L}from"./api.js";import{A as b}from"./variables.js";async function x(r){try{const c=await L.post("https://favorable-horses-250ddbd43e.strapiapp.com/api/offer-consultations",{data:r},{headers:{Authorization:`Bearer ${b.API_TOKEN}`}});return console.log("created ",c.data),c.data}catch(c){console.error("error:",c)}}document.addEventListener("DOMContentLoaded",function(){const r=document.querySelectorAll(".tab__name"),c=document.querySelectorAll(".tab__item"),l=document.querySelectorAll(".tab__next"),u=document.querySelector(".tab__category"),i=document.querySelectorAll(".tab__category-item");document.addEventListener("click",e=>{const t=e.target.matches("[data-dropdown-button]")||e.target.closest("[data-dropdown-button]");let o=null;t&&(o=e.target.closest("[data-dropdown]"),o.classList.toggle("open")),document.querySelectorAll("[data-dropdown].open").forEach(n=>{n!==o&&n.classList.remove("open")})}),document.addEventListener("click",e=>{if(!e.target.classList.contains("dropdown__item"))return;const t=e.target.closest(".dropdown");t.querySelector(".dropdown__value").textContent=e.target.textContent,t.classList.remove("open")}),document.addEventListener("click",e=>{const t=e.target.closest(".counter__btn");if(!t)return;const n=t.closest("[data-counter]").querySelector(".counter__value");let a=Number(n.textContent);t.classList.contains("counter__btn-minus")&&(a=Math.max(1,a-1)),t.classList.contains("counter__btn-plus")&&(a+=1),n.textContent=a});function m(e){r.forEach(t=>t.classList.remove("active")),c.forEach(t=>t.classList.remove("active")),r[e].classList.add("active"),c[e].classList.add("active")}l.forEach(e=>{e.addEventListener("click",()=>{const o=[...c].findIndex(n=>n.classList.contains("active"))+1;m(o)})}),u.addEventListener("click",e=>{const t=e.target.closest(".tab__category-item");if(!t)return;const o=Array.from(i).indexOf(t);i.forEach((n,a)=>{a<=o?n.classList.add("active"):n.classList.remove("active")})});async function g(e){e.preventDefault();const t=document.getElementById("data"),o=document.getElementById("direction"),n=document.getElementById("guests"),a=document.getElementById("tourTime");let s;const v=document.getElementById("desiredPrice"),y=document.getElementById("nutrition"),_=document.getElementById("wishes"),f=document.getElementById("name"),p=document.getElementById("phone"),E=document.getElementById("email");document.querySelectorAll(".tab__category-item.active").length<=0?s=0:s=document.querySelectorAll(".tab__category-item.active").length;const d={direction:o.textContent,date:t.textContent,tourTime:a.textContent,guests:n.textContent,desiredPrice:v.value,nutrition:y.textContent,rating:s,wishes:_.value,name:f.value,phone:p.value,email:E.value};console.log("SEND:",d);try{await x(d),console.log("консультація додана"),window.location.href="/ClubTravel/"}catch(h){console.log("error:",h)}}document.getElementById("consultationForm").addEventListener("submit",g)});
